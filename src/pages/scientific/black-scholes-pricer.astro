---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import TableOfContents from '../../components/TableOfContents.astro';
import AuthorsSidebar from '../../components/AuthorsSidebar.astro';

const authors = [
	{
		name: 'Justin Wang',
		title: 'Co-Founder & Principal Researcher',
		education: 'CS & Math, Stanford University',
		bio: 'Investment Strategies at Vise and Sponsorships Organizer for Stanford TreeHacks. Previously: Equity Syndicate Trading at Invesco and Captain of the U.S. National Economics Team.',
		expertise: ['AI', 'Biotechnology', 'Investment Management'],
		email: 'justinwang@stanford.edu',
		linkedin: 'https://www.linkedin.com/in/jstwng/',
		image: '/justin.jpeg'
	},
	{
		name: 'Rishabh Ranjan',
		title: 'Co-Founder & Principal Researcher',
		education: 'Bioengineering & CS, Stanford University',
		bio: 'Longevity Biotech and AI Fellow at the R42 group and nanoparticle drug delivery research at Stanford Medicine. Previously: 1st Place Grand Award for Biomedical Engineering at Regeneron ISEF.',
		expertise: ['Biotechnology', 'Equity Research', 'AI'],
		email: 'rishabh12ranjan@gmail.com',
		linkedin: 'https://www.linkedin.com/in/rishabhranj/',
		image: '/rishabh.jpeg'
	}
];
---

<Layout title="Black-Scholes Options Pricer" description="Interactive Black-Scholes options pricing calculator with Greeks">
	<Header currentPath="/scientific/black-scholes-pricer" />
	
	<main class="main">
		<article class="article">
			<header class="article-header">
				<nav class="breadcrumb">
					<a href="/" class="breadcrumb-link">Home</a>
					<span>/</span>
					<a href="/scientific" class="breadcrumb-link">Scientific</a>
					<span>/</span>
					<span>Black-Scholes Options Pricer</span>
				</nav>
				<div class="article-tags">
					<span class="tag">Scientific</span>
					<span class="tag">Options</span>
					<span class="tag">Finance</span>
				</div>
				<h1 class="article-title">Black-Scholes Options Pricer</h1>
				<p class="article-subtitle">Interactive options pricing calculator using the Black-Scholes model with real-time Greeks computation</p>
				<div class="article-meta">
					<span class="authors">Justin Wang, Rishabh Ranjan</span>
					<span class="date">January 2025</span>
				</div>
			</header>

			<div class="article-content">
				<section id="overview" class="content-section">
					<h2>Overview</h2>
					<p>The Black-Scholes model, developed by Fischer Black, Myron Scholes, and Robert Merton, is a mathematical framework for pricing European-style options. This interactive tool calculates option prices and the Greeks (Delta, Gamma, Theta, Vega, Rho) in real-time as you adjust the input parameters.</p>
				</section>

				<section id="calculator" class="content-section">
					<h2>Options Pricing Calculator</h2>
					<div class="calculator-container">
						<div class="input-section">
							<h3>Input Parameters</h3>
							<div class="input-grid">
								<div class="input-group">
									<label for="spot-price">Spot Price (S)</label>
									<input type="number" id="spot-price" value="100" step="0.01" min="0">
								</div>
								<div class="input-group">
									<label for="strike-price">Strike Price (K)</label>
									<input type="number" id="strike-price" value="100" step="0.01" min="0">
								</div>
								<div class="input-group">
									<label for="time-to-expiry">Time to Expiry (T, years)</label>
									<input type="number" id="time-to-expiry" value="0.25" step="0.01" min="0">
								</div>
								<div class="input-group">
									<label for="risk-free-rate">Risk-Free Rate (r, %)</label>
									<input type="number" id="risk-free-rate" value="5" step="0.01" min="0">
								</div>
								<div class="input-group">
									<label for="volatility">Volatility (σ, %)</label>
									<input type="number" id="volatility" value="20" step="0.01" min="0">
								</div>
								<div class="input-group">
									<label for="option-type">Option Type</label>
									<select id="option-type">
										<option value="call">Call</option>
										<option value="put">Put</option>
									</select>
								</div>
							</div>
						</div>

						<div class="results-section">
							<h3>Results</h3>
							<div class="results-grid">
								<div class="result-item price">
									<label>Option Price</label>
									<span id="option-price">$0.00</span>
								</div>
								<div class="result-item">
									<label>Delta (Δ)</label>
									<span id="delta">0.0000</span>
								</div>
								<div class="result-item">
									<label>Gamma (Γ)</label>
									<span id="gamma">0.0000</span>
								</div>
								<div class="result-item">
									<label>Theta (Θ)</label>
									<span id="theta">0.0000</span>
								</div>
								<div class="result-item">
									<label>Vega (ν)</label>
									<span id="vega">0.0000</span>
								</div>
								<div class="result-item">
									<label>Rho (ρ)</label>
									<span id="rho">0.0000</span>
								</div>
							</div>
						</div>
					</div>
				</section>

				<section id="methodology" class="content-section">
					<h2>Black-Scholes Formula</h2>
					<p>The Black-Scholes formula for European options is based on several key assumptions:</p>
					<ul>
						<li>Constant risk-free interest rate</li>
						<li>Constant volatility of the underlying asset</li>
						<li>No dividends during the option's life</li>
						<li>European exercise (only at expiration)</li>
						<li>No transaction costs</li>
					</ul>

					<h3>Call Option Formula</h3>
					<p>C = S₀ × N(d₁) - K × e^(-rT) × N(d₂)</p>

					<h3>Put Option Formula</h3>
					<p>P = K × e^(-rT) × N(-d₂) - S₀ × N(-d₁)</p>

					<p>Where:</p>
					<ul>
						<li>d₁ = [ln(S₀/K) + (r + σ²/2)T] / (σ√T)</li>
						<li>d₂ = d₁ - σ√T</li>
						<li>N(x) = cumulative standard normal distribution function</li>
					</ul>
				</section>

				<section id="greeks" class="content-section">
					<h2>The Greeks</h2>
					<p>The Greeks measure the sensitivity of option prices to various factors:</p>
					
					<div class="greeks-explanation">
						<div class="greek-item">
							<h4>Delta (Δ)</h4>
							<p>Measures the rate of change of option price with respect to the underlying asset price. For calls: N(d₁), for puts: N(d₁) - 1.</p>
						</div>
						
						<div class="greek-item">
							<h4>Gamma (Γ)</h4>
							<p>Measures the rate of change of delta with respect to the underlying asset price. φ(d₁) / (S₀ × σ × √T)</p>
						</div>
						
						<div class="greek-item">
							<h4>Theta (Θ)</h4>
							<p>Measures the rate of change of option price with respect to time decay (time to expiration).</p>
						</div>
						
						<div class="greek-item">
							<h4>Vega (ν)</h4>
							<p>Measures the rate of change of option price with respect to volatility. S₀ × φ(d₁) × √T</p>
						</div>
						
						<div class="greek-item">
							<h4>Rho (ρ)</h4>
							<p>Measures the rate of change of option price with respect to the risk-free interest rate.</p>
						</div>
					</div>
				</section>
			</div>

			<TableOfContents />
			<AuthorsSidebar authors={authors} />
		</article>
	</main>
	<Footer />
</Layout>

<script>
	// Black-Scholes calculation functions
	function normalCDF(x) {
		// Approximation of the cumulative standard normal distribution
		const a1 =  0.254829592;
		const a2 = -0.284496736;
		const a3 =  1.421413741;
		const a4 = -1.453152027;
		const a5 =  1.061405429;
		const p  =  0.3275911;

		const sign = x < 0 ? -1 : 1;
		x = Math.abs(x) / Math.sqrt(2.0);

		const t = 1.0 / (1.0 + p * x);
		const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);

		return 0.5 * (1.0 + sign * y);
	}

	function normalPDF(x) {
		return Math.exp(-0.5 * x * x) / Math.sqrt(2 * Math.PI);
	}

	function blackScholes(S, K, T, r, sigma, optionType) {
		if (T <= 0) return { price: 0, delta: 0, gamma: 0, theta: 0, vega: 0, rho: 0 };

		const d1 = (Math.log(S / K) + (r + 0.5 * sigma * sigma) * T) / (sigma * Math.sqrt(T));
		const d2 = d1 - sigma * Math.sqrt(T);

		const Nd1 = normalCDF(d1);
		const Nd2 = normalCDF(d2);
		const Nminus_d1 = normalCDF(-d1);
		const Nminus_d2 = normalCDF(-d2);
		const phi_d1 = normalPDF(d1);

		let price, delta, gamma, theta, vega, rho;

		if (optionType === 'call') {
			price = S * Nd1 - K * Math.exp(-r * T) * Nd2;
			delta = Nd1;
			theta = -(S * phi_d1 * sigma / (2 * Math.sqrt(T))) - r * K * Math.exp(-r * T) * Nd2;
			rho = K * T * Math.exp(-r * T) * Nd2;
		} else {
			price = K * Math.exp(-r * T) * Nminus_d2 - S * Nminus_d1;
			delta = Nminus_d1 - 1;
			theta = -(S * phi_d1 * sigma / (2 * Math.sqrt(T))) + r * K * Math.exp(-r * T) * Nminus_d2;
			rho = -K * T * Math.exp(-r * T) * Nminus_d2;
		}

		gamma = phi_d1 / (S * sigma * Math.sqrt(T));
		vega = S * phi_d1 * Math.sqrt(T);

		return { price, delta, gamma, theta, vega, rho };
	}

	function updateCalculation() {
		const S = parseFloat(document.getElementById('spot-price').value);
		const K = parseFloat(document.getElementById('strike-price').value);
		const T = parseFloat(document.getElementById('time-to-expiry').value);
		const r = parseFloat(document.getElementById('risk-free-rate').value) / 100;
		const sigma = parseFloat(document.getElementById('volatility').value) / 100;
		const optionType = document.getElementById('option-type').value;

		const result = blackScholes(S, K, T, r, sigma, optionType);

		document.getElementById('option-price').textContent = `$${result.price.toFixed(2)}`;
		document.getElementById('delta').textContent = result.delta.toFixed(4);
		document.getElementById('gamma').textContent = result.gamma.toFixed(4);
		document.getElementById('theta').textContent = result.theta.toFixed(4);
		document.getElementById('vega').textContent = result.vega.toFixed(4);
		document.getElementById('rho').textContent = result.rho.toFixed(4);
	}

	// Add event listeners
	document.addEventListener('DOMContentLoaded', function() {
		const inputs = ['spot-price', 'strike-price', 'time-to-expiry', 'risk-free-rate', 'volatility', 'option-type'];
		
		inputs.forEach(id => {
			const element = document.getElementById(id);
			element.addEventListener('input', updateCalculation);
			element.addEventListener('change', updateCalculation);
		});

		// Initial calculation
		updateCalculation();
	});
</script>

<style>
	.calculator-container {
		background: #f8f9fa;
		border-radius: 12px;
		padding: 32px;
		margin: 32px 0;
		border: 1px solid #e5e5e5;
	}

	.input-section h3,
	.results-section h3 {
		margin: 0 0 24px 0;
		font-size: 20px;
		font-weight: 500;
		color: #1a1a1a;
	}

	.input-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
		gap: 20px;
		margin-bottom: 32px;
	}

	.input-group {
		display: flex;
		flex-direction: column;
	}

	.input-group label {
		font-size: 14px;
		font-weight: 500;
		color: #333;
		margin-bottom: 8px;
		font-family: 'Inter', system-ui, sans-serif;
	}

	.input-group input,
	.input-group select {
		padding: 12px;
		border: 1px solid #ddd;
		border-radius: 8px;
		font-size: 16px;
		background: white;
		transition: border-color 0.2s;
	}

	.input-group input:focus,
	.input-group select:focus {
		outline: none;
		border-color: #21752F;
		box-shadow: 0 0 0 3px rgba(33, 117, 47, 0.1);
	}

	.results-section {
		border-top: 1px solid #e5e5e5;
		padding-top: 32px;
	}

	.results-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
		gap: 20px;
	}

	.result-item {
		background: white;
		padding: 20px;
		border-radius: 8px;
		text-align: center;
		border: 1px solid #e5e5e5;
		transition: transform 0.2s;
	}

	.result-item:hover {
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
	}

	.result-item.price {
		background: linear-gradient(135deg, #21752F, #2d8f3f);
		color: white;
		border-color: #21752F;
	}

	.result-item label {
		display: block;
		font-size: 12px;
		font-weight: 500;
		margin-bottom: 8px;
		opacity: 0.8;
		font-family: 'Inter', system-ui, sans-serif;
	}

	.result-item span {
		font-size: 18px;
		font-weight: 600;
		font-family: 'Inter', system-ui, sans-serif;
	}

	.result-item.price span {
		font-size: 24px;
	}

	.greeks-explanation {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
		gap: 24px;
		margin-top: 24px;
	}

	.greek-item {
		background: #f8f9fa;
		padding: 24px;
		border-radius: 8px;
		border-left: 4px solid #21752F;
	}

	.greek-item h4 {
		margin: 0 0 12px 0;
		font-size: 16px;
		font-weight: 600;
		color: #21752F;
	}

	.greek-item p {
		margin: 0;
		font-size: 14px;
		color: #666;
		line-height: 1.5;
	}

	@media (max-width: 768px) {
		.calculator-container {
			padding: 24px 20px;
		}

		.input-grid {
			grid-template-columns: 1fr;
		}

		.results-grid {
			grid-template-columns: repeat(2, 1fr);
		}

		.greeks-explanation {
			grid-template-columns: 1fr;
		}
	}
</style> 