---
const { currentPath } = Astro.props;
---

<header class="header">
	<div class="container">
		<nav class="nav">
			<a href="/" class="logo">
				<span class="logo-text">Novana Insights</span>
			</a>
			
			<!-- Mobile menu button -->
			<button class="mobile-menu-button" id="mobile-menu-button" aria-label="Toggle menu">
				<span class="hamburger-line"></span>
				<span class="hamburger-line"></span>
				<span class="hamburger-line"></span>
			</button>
			
			<!-- Navigation links -->
			<div class="nav-links" id="nav-links">
				<a href="/" class={currentPath === '/' ? 'nav-link active' : 'nav-link'}>Home</a>
				<a href="/research" class={currentPath === '/research' ? 'nav-link active' : 'nav-link'}>Research</a>
				<a href="/about" class={currentPath === '/about' ? 'nav-link active' : 'nav-link'}>About</a>
			</div>
		</nav>
	</div>
</header>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		const mobileMenuButton = document.getElementById('mobile-menu-button');
		const navLinks = document.getElementById('nav-links');
		
		mobileMenuButton?.addEventListener('click', function() {
			navLinks?.classList.toggle('active');
			mobileMenuButton.classList.toggle('active');
		});
		
		// Close menu when clicking on a link
		const links = navLinks?.querySelectorAll('.nav-link');
		links?.forEach(link => {
			link.addEventListener('click', () => {
				navLinks?.classList.remove('active');
				mobileMenuButton?.classList.remove('active');
			});
		});
		
		// Close menu when clicking outside
		document.addEventListener('click', function(event) {
			if (!navLinks?.contains(event.target as Node) && !mobileMenuButton?.contains(event.target as Node)) {
				navLinks?.classList.remove('active');
				mobileMenuButton?.classList.remove('active');
			}
		});
	});
</script>

<style>
	.header {
		background: white;
		position: sticky;
		top: 0;
		z-index: 100;
		border-bottom: 1px solid var(--border-color);
	}

	.nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		height: 80px;
	}

	.logo {
		text-decoration: none;
		color: var(--text-primary);
	}

	.logo-text {
		font-size: 20px;
		font-weight: 700;
		color: var(--text-primary);
		line-height: 1.0;
		letter-spacing: -0.01em;
	}

	.mobile-menu-button {
		display: none;
		flex-direction: column;
		gap: 4px;
		background: none;
		border: none;
		cursor: pointer;
		padding: 8px;
		z-index: 101;
	}

	.hamburger-line {
		width: 24px;
		height: 2px;
		background: var(--text-primary);
		transition: all 0.3s ease;
		border-radius: 1px;
	}

	.mobile-menu-button.active .hamburger-line:nth-child(1) {
		transform: translateY(6px) rotate(45deg);
	}

	.mobile-menu-button.active .hamburger-line:nth-child(2) {
		opacity: 0;
	}

	.mobile-menu-button.active .hamburger-line:nth-child(3) {
		transform: translateY(-6px) rotate(-45deg);
	}

	.nav-links {
		display: flex;
		align-items: center;
		gap: 32px;
	}

	.nav-link {
		color: var(--text-secondary);
		text-decoration: none;
		font-weight: 500;
		transition: color 0.2s ease;
		position: relative;
		font-size: 15px;
	}

	.nav-link:hover,
	.nav-link.active {
		color: var(--text-primary);
	}

	/* Mobile styles */
	@media (max-width: 768px) {
		.mobile-menu-button {
			display: flex;
		}
		
		.nav-links {
			position: fixed;
			top: 80px;
			right: 0;
			width: 240px;
			background: white;
			flex-direction: column;
			gap: 0;
			padding: 20px 0;
			transform: translateX(100%);
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
			box-shadow: -8px 4px 20px rgba(0, 0, 0, 0.15);
			border-left: 1px solid var(--border-color);
		}
		
		.nav-links.active {
			transform: translateX(0);
			opacity: 1;
			visibility: visible;
		}
		
		.nav-link {
			padding: 12px 24px;
			font-size: 16px;
			color: var(--text-primary);
			text-align: left;
			display: block;
			width: 100%;
		}
		
		.nav-link:hover,
		.nav-link.active {
			color: var(--text-secondary);
			background: var(--bg-light);
		}
		
		.nav-link.active::after {
			display: none;
		}
		
		.logo-text {
			font-size: 18px;
		}
	}
</style>